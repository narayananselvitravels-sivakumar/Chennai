<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Panel - NST Travels</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background-color: #f3f4f6;
    }
    .panel {
      max-width: 600px;
      margin: auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      padding: 2.5rem;
      transition: transform 0.2s ease-in-out;
    }
    .panel:hover {
      transform: translateY(-4px);
    }
    .btn {
      transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
    }
    .btn:hover {
      transform: translateY(-2px);
    }
    .input-field {
      transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .input-field:focus {
      border-color: #4f46e5;
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="bg-white shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <a href="#" class="text-2xl font-bold text-indigo-600">NST Travels</a>
        </div>
        <div class="hidden sm:flex items-center space-x-4">
          <a href="admin-dashboard.html" class="text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Dashboard</a>
          <a href="report.html" class="text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Report</a>
          <a href="attendance.html" class="text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Attendance</a>
          <a href="driver-dashboard.html" class="text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Driver Dashboard</a>
          <a href="drivers-vehicles.html" class="text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Drivers & Vehicles</a>
          <a href="payment-summary.html" class="text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Payment Summary</a>
          <a href="revenue.html" class="text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Revenue</a>
          <a href="trip-summary.html" class="text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Trip Summary</a>
        </div>
      </div>
    </div>
  </nav>

  <div class="container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 flex-grow">
    <!-- üîê Login Panel -->
    <div class="panel" id="loginPanel" style="display: none;">
      <h3 class="text-2xl font-semibold text-gray-900 mb-6 text-center">üîê Admin Login</h3>
      <div class="mb-4">
        <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
        <input type="text" id="username" class="input-field w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" aria-label="Username" />
      </div>
      <div class="mb-6">
        <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
        <input type="password" id="password" class="input-field w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" aria-label="Password" />
      </div>
      <button class="btn bg-indigo-600 text-white w-full px-6 py-3 rounded-md hover:bg-indigo-700" onclick="login()">Login</button>
    </div>

    <!-- ‚úÖ Admin Panel -->
    <div class="panel" id="adminPanel" style="display: none;">
      <h3 class="text-2xl font-semibold text-gray-900 mb-6 text-center">üîß Admin Panel - NST Travels</h3>
      <button class="btn bg-red-100 text-red-800 w-full px-6 py-3 rounded-md hover:bg-red-200 mb-4 flex items-center justify-center" onclick="logout()">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
        </svg>
        Logout
      </button>

      <!-- Admin Navigation -->
      <div class="grid gap-3">
        <a href="admin-dashboard.html" class="btn bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 text-center">Dashboard</a>
        <a href="attendance.html" class="btn bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 text-center">Attendance</a>
        <a href="driver-dashboard.html" class="btn bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 text-center">Driver Dashboard</a>
        <a href="drivers-vehicles.html" class="btn bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 text-center">Drivers & Vehicles</a>
        <a href="payment-summary.html" class="btn bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 text-center">Payment Summary</a>
        <a href="revenue.html" class="btn bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 text-center">Revenue</a>
        <a href="trip-summary.html" class="btn bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 text-center">Trip Summary</a>
      </div>

      <hr class="my-6 border-gray-200" />

      <!-- üîÅ Reset Section -->
      <h5 class="text-lg font-semibold text-gray-900 mb-4">üõ† Reset Tools</h5>
      <button class="btn bg-amber-500 text-white w-full px-6 py-3 rounded-md hover:bg-amber-600 mb-3" onclick="resetTripId()">üîÅ Reset Trip ID to #NST001</button>
      <button class="btn bg-red-600 text-white w-full px-6 py-3 rounded-md hover:bg-red-700" onclick="resetAllTrips()">üóëÔ∏è Reset All Trip Data</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-6 mt-auto">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <p>¬© 2025 NST Travels. All rights reserved.</p>
    </div>
  </footer>

  <!-- Existing Scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, set, remove } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCz2rGDr0iREns6Rg6r1z5EHE3qhLDnEzs",
      authDomain: "narayananselvitravels-26dcb.firebaseapp.com",
      databaseURL: "https://narayananselvitravels-26dcb-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "narayananselvitravels-26dcb",
      storageBucket: "narayananselvitravels-26dcb.appspot.com",
      messagingSenderId: "395599682835",
      appId: "1:395599682835:web:9d46e03ca14aa0738dcee6"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const ADMIN_USERNAME = "Siva";
    const ADMIN_PASSWORD = "Nst@1007";

    // Check login on page load
    window.addEventListener("DOMContentLoaded", () => {
      if (localStorage.getItem("loggedIn") === "true") {
        showAdminPanel();
      } else {
        showLoginPanel();
      }
    });

    function showAdminPanel() {
      document.getElementById("loginPanel").style.display = "none";
      document.getElementById("adminPanel").style.display = "block";
    }

    function showLoginPanel() {
      document.getElementByIdŸî, "block"; document.getElementById("loginPanel").style.display = "block";
      document.getElementById("adminPanel").style.display = "none";
    }

    window.login = function () {
      const user = document.getElementById("username").value;
      const pass = document.getElementById("password").value;

      if (user === ADMIN_USERNAME && pass === ADMIN_PASSWORD) {
        localStorage.setItem("loggedIn", "true");
        showAdminPanel();
      } else {
        alert("‚ùå Invalid username or password");
      }
    };

    window.logout = function () {
      localStorage.removeItem("loggedIn");
      showLoginPanel();
    };

    window.resetTripId = async function () {
      set(ref(db, "tripResetFlag"), true);
      alert("‚úÖ Trip ID reset to #NST001. Refresh trip.html to see the change.");
    };

    window.resetAllTrips = async function () {
      const confirmReset = confirm("‚ö†Ô∏è Are you sure? This will DELETE all trips permanently.");
      if (confirmReset) {
        await remove(ref(db, "trips"));
        await set(ref(db, "tripResetFlag"), true);
        alert("üóëÔ∏è All trips deleted and Trip ID reset.");
      }
    };
  </script>
</body>
</html>
